# Bluebell
## 项目分层
- main: 入口层，负责启动服务，初始化配置，初始化日志，初始化数据库，初始化路由，监听端口等
- routes: 路由层，负责路由的注册，路由的分组，路由的中间件的注册
- mideware: 中间件层，负责jwt认证，日志记录，限流等中间件
- controller：控制器层，负责接收请求，解析参数，调用业务逻辑，返回响应
- logic: 逻辑层，负责业务逻辑的编写
- dao: 数据访问层，负责mysql数据库的增删改查，redis数据库的增删改查
- models: 模型层，负责定义数据模型
- pkg: 工具层，负责封装工具函数
- settings: 配置层，负责读取配置文件，初始化配置信息

## 项目模块
### main和路由模块
1. 使用jwt中间件进行用户鉴权，使用zap日志中间件记录日志，使用令牌桶限流中间件限制接口访问流量
### 配置模块
1. 使用vipper读取config.yaml文件中定义的配置信息，反序列化到settings.Config结构体中
2. 监听配置文件的变化，当配置文件发生变化时，重新读取配置文件反序列化到settings.Config结构体中
### 日志模块
1. 使用zap自定义日志覆盖了gin框架中的日志功能，将日志读取到bluebell.log文件中
### 用户模块
#### 用户注册
1. 判断用户在mysql数据库中是否存在，若不存在，密码加密，使用雪花算法生成随机ID，插入数据库，返回注册成功，否则返回注册失败
#### 用户登录
1. 判断用户名和密码是否和mysql数据库中的一致，若一致，返回一个jwt Token，否则返回登录失败

### 话题模块
   根据话题热度，热搜功能
1. 查询话题列表，分页查询
2. 根据社区id查询社区详情
### 帖子模块
1. 创建帖子，在mysql数据库中插入一条帖子记录，redis数据库中插入一条帖子时间的记录
2. 根据帖子id查询帖子详情
3. 查询帖子列表，分页查询
   - 根据mysql中的id排序mysql查询帖子列表
   - 根据redis中的发帖时间或者投票得分排序，查询帖子列表
   - 根据社区id查询帖子列表
赞同得1票，浏览得1票，踩得-1票，不头得0票，得分= 票 * 432
1. 限制只能在帖子发表1周内，不能重复点赞
### 点赞模块
### 用户直播带货模块
